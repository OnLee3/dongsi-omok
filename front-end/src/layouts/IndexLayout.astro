---
import Layout from './BaseLayout.astro';
---

<Layout>
  <div class="bg-layer"><slot name="bg" /></div>
  <div class="pointer-layer"><slot name="pt" /></div>
</Layout>
<style>
  .bg-layer {
    position: absolute;
    display: flex;
    justify-content: center;
    align-items: center;
    flex-direction: column;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(
      to right,
      hsl(0, 0%, 92%) 0%,
      white 50%,
      black 50%,
      hsl(0, 0%, 8%) 100%
    );
  }
  .pointer-layer[data-show] {
    position: absolute;
    display: flex;
    justify-content: center;
    align-items: center;
    flex-direction: column;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(
      to left,
      hsl(0, 0%, 92%) 0%,
      white 50%,
      black 50%,
      hsl(0, 0%, 8%) 100%
    );
    clip-path: circle(15% at var(--x, 50%) var(--y, 50%));
  }
</style>
<script>
  const currentPos = { x: 0, y: 0 };
  const targetPos = { x: 0, y: 0 };

  const pointerLayer = document.querySelector(
    '.pointer-layer',
  ) as HTMLDivElement;

  document.addEventListener('pointermove', (event) => {
    const { clientX, clientY } = event;
    if (!pointerLayer.dataset.show) {
      pointerLayer.dataset.show = 'true';
    }
    const xPercent = (clientX / window.innerWidth) * 100;
    const yPercent = (clientY / window.innerHeight) * 100;
    pointerLayer.style.setProperty('--x', `${xPercent}%`);
    pointerLayer.style.setProperty('--y', `${yPercent}%`);
    // targetPos.x = clientX;
    // targetPos.y = clientY;
  });
</script>
